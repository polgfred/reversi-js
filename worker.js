var I=Object.create;var{getPrototypeOf:L,defineProperty:f,getOwnPropertyNames:c}=Object;var C=Object.prototype.hasOwnProperty;var b=(T,p,R)=>{R=T!=null?I(L(T)):{};let P=p||!T||!T.__esModule?f(R,"default",{value:T,enumerable:!0}):R;for(let N of c(T))if(!C.call(P,N))f(P,N,{get:()=>T[N],enumerable:!0});return P};var n=(T,p)=>()=>(p||T((p={exports:{}}).exports,p),p.exports);var t=((T)=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(T,{get:(p,R)=>(typeof require<"u"?require:p)[R]}):T)(function(T){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+T+'" is not supported')});var V={BLACK:1,WHITE:-1},z={EMPTY:0,BLACK_PIECE:1,WHITE_PIECE:-1};var{BLACK:$,WHITE:g}=V,{EMPTY:S,BLACK_PIECE:Y,WHITE_PIECE:H}=z;function B(T,p){function R(){switch(p){case $:p=g;break;case g:p=$;break}}function P(j){let[G,w]=j;if(T[w][G]!==S)return!1;let q=!1,D=2;for(let J=-1;J<=1;++J)for(let F=-1;F<=1;++F){if(F===0&&J===0)continue;let U=G,X=w;j[D]=0;for(let Z=0;;++Z){if(U+=F,X+=J,((U|X)&-8)!==0)break;let _=T[X][U];if(_===S)break;if(_===p){if(Z>0)q=!0,j[D]=Z;break}}++D}return q}function N(j,G){let[w,q]=G,D=2;for(let J=-1;J<=1;++J)for(let F=-1;F<=1;++F){if(F===0&&J===0)continue;let U=w,X=q;for(let Z=G[D];Z!==0;--Z)U+=F,X+=J,T[X][U]=j;++D}}function*k(){let j=[0,0,0,0,0,0,0,0,0,0],G=p===$?Y:H,w=p===$?H:Y;for(let q=0;(q&-8)===0;++q)for(let D=0;(D&-8)===0;++D){if(T[q][D]!==S)continue;if(j[0]=D,j[1]=q,!P(j))continue;try{T[q][D]=G,N(G,j),R(),yield[...j]}finally{R(),T[q][D]=S,N(w,j)}}}function Q(j){let[G,w]=j,q=p===$?Y:H;T[w][G]=q,N(q,j),R()}return{getBoard:()=>T,getSide:()=>p,findMoves:k,doMove:Q}}var{BLACK_PIECE:y,WHITE_PIECE:E}=z,O=[[90],[10,5],[30,10,30],[20,10,20,10]],W=[[],[],[],[],[],[],[],[]];for(let T=0;T<8;++T)for(let p=0;p<8;++p){let R=p^7,P=T^7;W[T][p]=O[T]?.[p]??O[P]?.[p]??O[T]?.[R]??O[P]?.[R]??O[p]?.[T]??O[R]?.[T]??O[p]?.[P]??O[R]?.[P]??0}function M(T){let p=0;for(let R=0;R<8;++R)for(let P=0;P<8;++P)switch(T[R][P]){case y:p+=W[R][P];break;case E:p-=W[R][P];break}return p}var{BLACK:K,WHITE:h}=V,m=8;function A(T,p,R=m){let{getSide:P,findMoves:N}=B(T,p);return k(-1/0,1/0);function k(Q,j){let G=P(),w=G===K?-1/0:1/0,q;if(R===0)w=M(T);else{R--;let D=N();for(let J of D){let[F]=k(Q,j);switch(G){case K:if(F>w)w=F,q=J;if(w>=j){D.return();break}if(w>Q)Q=w;break;case h:if(F<w)w=F,q=J;if(w<=Q){D.return();break}if(w<j)j=w;break}}R++}return[w,q]}}self.addEventListener("message",(T)=>{let{board:p,side:R}=T.data,[,P]=A(p,R);self.postMessage({move:P})},!1);
